(()=>{"use strict";var e=[,e=>{e.exports=require("@nestjs/common")},e=>{e.exports=require("@nestjs/core")},e=>{e.exports=require("@nestjs/swagger")},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.swaggerConfig=void 0;const o=r(3);t.swaggerConfig=(new o.DocumentBuilder).setTitle("Event Tracker API").setVersion("1.0").addServer("http://vps-96efac4c.vps.ovh.ca:3000/","Local Development").build()},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseInterceptor=void 0;const o=r(6),a=r(1),n=r(7);let i=class ResponseInterceptor{intercept(e,t){return t.handle().pipe((0,n.map)((t=>this.responseHandler(t,e))),(0,n.catchError)((t=>(0,n.throwError)((()=>this.errorHandler(t,e))))))}errorHandler(e,t){const r=t.switchToHttp(),o=r.getResponse(),n=r.getRequest(),i=e instanceof a.HttpException?e.getStatus():a.HttpStatus.INTERNAL_SERVER_ERROR;o.status(i).json({status:!1,statusCode:i,path:n.url,message:e.message,result:e})}responseHandler(e,t){const r=t.switchToHttp(),o=r.getResponse(),a=r.getRequest(),n=o.statusCode;o.status(n).json({status:!0,statusCode:n,path:a.url,result:e})}};t.ResponseInterceptor=i,t.ResponseInterceptor=i=o.__decorate([(0,a.Injectable)()],i)},e=>{e.exports=require("tslib")},e=>{e.exports=require("rxjs")},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppModule=void 0;const o=r(6),a=r(1),n=r(2),i=r(9),s=r(10),d=r(11),p=r(38),c=r(42),l=r(43),u=r(35),_=r(47),y=r(50),m=r(54),v=r(59);let g=class AppModule{};t.AppModule=g,t.AppModule=g=o.__decorate([(0,a.Module)({imports:[_.GendersModule,i.TypeOrmModule.forRoot({...s.baseConfig}),p.CategoriesModule,y.EventsModule,l.PeopleModule,u.UsersModule,d.AuthModule,u.UsersModule,m.VaultModule,v.FileUploadModule],controllers:[],providers:[{provide:n.APP_GUARD,useClass:c.AuthGuard}]})],g)},e=>{e.exports=require("@nestjs/typeorm")},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baseConfig=void 0,t.baseConfig={type:"mysql",host:"vps-96efac4c.vps.ovh.ca",port:3306,username:"kevin.estrada",password:"Emco2023**",database:"event_trackr_dev",synchronize:!1,autoLoadEntities:!0}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AuthModule=void 0;const o=r(6),a=r(1),n=r(12),i=r(33),s=r(13),d=r(34),p=r(35),c=r(37);let l=class AuthModule{};t.AuthModule=l,t.AuthModule=l=o.__decorate([(0,a.Module)({providers:[n.AuthService],controllers:[i.AuthController],imports:[c.CommonModule,p.UsersModule,s.JwtModule.register({global:!0,secret:d.jwt_secret,signOptions:{expiresIn:"7200s"}})]})],l)},(e,t,r)=>{var o,a,n;Object.defineProperty(t,"__esModule",{value:!0}),t.AuthService=void 0;const i=r(6),s=r(1),d=r(13),p=r(14),c=r(29);let l=class AuthService{constructor(e,t,r){this.userService=e,this.jwtService=t,this.encryptionService=r}async login(e,t){const r=await this.userService.getUserByUsername(e);if(!r)throw new s.UnauthorizedException("Usuario no encontrado");if(!(await this.encryptionService.comparePassword(t,r.password)))throw new s.UnauthorizedException("Contrase\xf1a incorrecta");const o={sub:r.id,username:r.username},a=await this.jwtService.signAsync(o),{password:n,...i}=r;return{...i,token:a}}};t.AuthService=l,t.AuthService=l=i.__decorate([(0,s.Injectable)(),i.__metadata("design:paramtypes",["function"==typeof(o=void 0!==p.UsersService&&p.UsersService)?o:Object,"function"==typeof(a=void 0!==d.JwtService&&d.JwtService)?a:Object,"function"==typeof(n=void 0!==c.EncryptionService&&c.EncryptionService)?n:Object])],l)},e=>{e.exports=require("@nestjs/jwt")},(e,t,r)=>{var o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.UsersService=void 0;const n=r(6),i=r(1),s=r(9),d=r(15),p=r(16),c=r(29);let l=class UsersService{constructor(e,t){this.usersRepository=e,this.encryptionService=t}async getAllUsers(){return await this.usersRepository.find()}async getUserByUsername(e){return await this.usersRepository.findOne({where:{username:e},relations:["role","gender"]})}async getUserById(e){return await this.usersRepository.findOne({where:{id:e},relations:["role","gender"]})}async createUser(e){if(await this.usersRepository.findOne({where:{username:e.username}}))throw new Error("Este nombre de usuario ya existe.");return e={...e,photo:`https://avatar.iran.liara.run/public/${1===e.gender.id?"boy":"girl"}?username=[${e.username}]`,created_at:new Date,updated_at:new Date,password:await this.encryptionService.hashPassword(e.password)},await this.usersRepository.save(e)}async updateUser(e,t){return await this.usersRepository.update({id:e},t),this.usersRepository.findOne({where:{id:e}})}async deleteUser(e){await this.usersRepository.delete(e)}};t.UsersService=l,t.UsersService=l=n.__decorate([(0,i.Injectable)(),n.__param(0,(0,s.InjectRepository)(p.UsersEntity)),n.__metadata("design:paramtypes",["function"==typeof(o=void 0!==d.Repository&&d.Repository)?o:Object,"function"==typeof(a=void 0!==c.EncryptionService&&c.EncryptionService)?a:Object])],l)},e=>{e.exports=require("typeorm")},(e,t,r)=>{var o,a,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.UsersEntity=void 0;const s=r(6),d=r(15),p=r(17),c=r(27),l=r(28);let u=class UsersEntity{};t.UsersEntity=u,s.__decorate([(0,d.PrimaryGeneratedColumn)(),s.__metadata("design:type",Number)],u.prototype,"id",void 0),s.__decorate([(0,d.Column)(),s.__metadata("design:type",String)],u.prototype,"username",void 0),s.__decorate([(0,d.Column)(),s.__metadata("design:type",String)],u.prototype,"name",void 0),s.__decorate([(0,d.Column)(),s.__metadata("design:type",String)],u.prototype,"photo",void 0),s.__decorate([(0,d.Column)(),s.__metadata("design:type",String)],u.prototype,"email",void 0),s.__decorate([(0,d.Column)(),s.__metadata("design:type",String)],u.prototype,"telephone",void 0),s.__decorate([(0,d.Column)(),s.__metadata("design:type",String)],u.prototype,"password",void 0),s.__decorate([(0,d.ManyToOne)((()=>c.RolesEntity),(e=>e.id)),(0,d.JoinColumn)({name:"id_role"}),s.__metadata("design:type","function"==typeof(o=void 0!==p.Role&&p.Role)?o:Object)],u.prototype,"role",void 0),s.__decorate([(0,d.ManyToOne)((()=>l.GendersEntity),(e=>e.id)),(0,d.JoinColumn)({name:"id_gender"}),s.__metadata("design:type","function"==typeof(a=void 0!==p.Gender&&p.Gender)?a:Object)],u.prototype,"gender",void 0),s.__decorate([(0,d.CreateDateColumn)({type:"timestamp"}),s.__metadata("design:type","function"==typeof(n="undefined"!=typeof Date&&Date)?n:Object)],u.prototype,"created_at",void 0),s.__decorate([(0,d.UpdateDateColumn)({type:"timestamp"}),s.__metadata("design:type","function"==typeof(i="undefined"!=typeof Date&&Date)?i:Object)],u.prototype,"updated_at",void 0),t.UsersEntity=u=s.__decorate([(0,d.Entity)("users")],u)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(6);o.__exportStar(r(18),t),o.__exportStar(r(19),t),o.__exportStar(r(20),t),o.__exportStar(r(21),t),o.__exportStar(r(22),t),o.__exportStar(r(23),t),o.__exportStar(r(24),t),o.__exportStar(r(25),t),o.__exportStar(r(26),t)},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RolesEntity=void 0;const o=r(6),a=r(15);let n=class RolesEntity{};t.RolesEntity=n,o.__decorate([(0,a.PrimaryGeneratedColumn)(),o.__metadata("design:type",Number)],n.prototype,"id",void 0),o.__decorate([(0,a.Column)(),o.__metadata("design:type",String)],n.prototype,"name",void 0),o.__decorate([(0,a.Column)(),o.__metadata("design:type",String)],n.prototype,"description",void 0),t.RolesEntity=n=o.__decorate([(0,a.Entity)("roles")],n)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GendersEntity=void 0;const o=r(6),a=r(15);let n=class GendersEntity{};t.GendersEntity=n,o.__decorate([(0,a.PrimaryGeneratedColumn)(),o.__metadata("design:type",Number)],n.prototype,"id",void 0),o.__decorate([(0,a.Column)(),o.__metadata("design:type",String)],n.prototype,"name",void 0),t.GendersEntity=n=o.__decorate([(0,a.Entity)("genders")],n)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionService=void 0;const o=r(6),a=r(1),n=o.__importStar(r(30)),i=r(31),s=o.__importStar(r(32));let d=class EncryptionService{constructor(){this.saltRounds=10,this.encryptionAlgorithm="aes-256-cbc",this.secretKey=Buffer.from(s.secretKey,"hex"),this.iv=Buffer.from(s.iv,"hex")}async hashPassword(e){const t=await n.genSalt(this.saltRounds);return n.hash(e,t)}async comparePassword(e,t){return n.compare(e,t)}async encryptString(e){try{const t=(0,i.createCipheriv)(this.encryptionAlgorithm,this.secretKey,this.iv);let r=t.update(e,"utf8","hex");return r+=t.final("hex"),r}catch(t){throw new Error("Failed to encrypt string")}}async decryptString(e){try{const t=(0,i.createDecipheriv)(this.encryptionAlgorithm,this.secretKey,this.iv);let r=t.update(e,"hex","utf8");return r+=t.final("utf8"),r}catch(t){throw new Error("Failed to decrypt string")}}};t.EncryptionService=d,t.EncryptionService=d=o.__decorate([(0,a.Injectable)()],d)},e=>{e.exports=require("bcrypt")},e=>{e.exports=require("crypto")},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.iv=t.secretKey=void 0,t.secretKey="b069ade74548c638cdf726197bfba05661760380d4263a9618e0dbf4e9960de4",t.iv="d83ebe84e14abaa9d7df3f15ecebe1c4"},(e,t,r)=>{var o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.AuthController=void 0;const n=r(6),i=r(1),s=r(3),d=r(12),p=r(34),c=r(14);let l=class AuthController{constructor(e,t){this.authService=e,this.userService=t}async login(e){const{username:t,password:r}=e;return await this.authService.login(t,r)}async getProfile(e){const t=e.user.username,r=await this.userService.getUserByUsername(t),{password:o,...a}=r;return a}};t.AuthController=l,n.__decorate([(0,p.Public)(),(0,s.ApiBody)({schema:{type:"object",properties:{username:{type:"string",description:"The username of the user"},password:{type:"string",description:"The password of the user"}}}}),(0,i.Post)("login"),n.__param(0,(0,i.Body)()),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Object]),n.__metadata("design:returntype",Promise)],l.prototype,"login",null),n.__decorate([(0,i.Get)("profile"),n.__param(0,(0,i.Request)()),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Object]),n.__metadata("design:returntype",Promise)],l.prototype,"getProfile",null),t.AuthController=l=n.__decorate([(0,s.ApiTags)("Authentication"),(0,i.Controller)("auth"),n.__metadata("design:paramtypes",["function"==typeof(o=void 0!==d.AuthService&&d.AuthService)?o:Object,"function"==typeof(a=void 0!==c.UsersService&&c.UsersService)?a:Object])],l)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Public=t.IS_PUBLIC_KEY=t.jwt_secret=void 0;const o=r(1);t.jwt_secret="3d389a3051558ba0a417f1ce5e35f13aa0d2f6d657428c52325e75b436504b03",t.IS_PUBLIC_KEY="isPublic";t.Public=()=>(0,o.SetMetadata)(t.IS_PUBLIC_KEY,!0)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UsersModule=void 0;const o=r(6),a=r(1),n=r(36),i=r(14),s=r(27),d=r(16),p=r(9),c=r(37);let l=class UsersModule{};t.UsersModule=l,t.UsersModule=l=o.__decorate([(0,a.Module)({imports:[c.CommonModule,p.TypeOrmModule.forFeature([d.UsersEntity,s.RolesEntity])],controllers:[n.UsersController],providers:[i.UsersService],exports:[i.UsersService]})],l)},(e,t,r)=>{var o,a,n,i,s,d,p,c;Object.defineProperty(t,"__esModule",{value:!0}),t.UsersController=void 0;const l=r(6),u=r(1),_=r(3),y=r(14),m=r(16);let v=class UsersController{constructor(e){this.usersService=e}async getAllUsers(){return await this.usersService.getAllUsers()}async getUserById(e){return await this.usersService.getUserById(e)}async createUser(e){return await this.usersService.createUser(e)}async updateUser(e,t){return await this.usersService.updateUser(e,t)}async deleteUser(e){await this.usersService.deleteUser(e)}};t.UsersController=v,l.__decorate([(0,u.Get)(),l.__metadata("design:type",Function),l.__metadata("design:paramtypes",[]),l.__metadata("design:returntype","function"==typeof(a="undefined"!=typeof Promise&&Promise)?a:Object)],v.prototype,"getAllUsers",null),l.__decorate([(0,u.Get)(":id"),l.__param(0,(0,u.Param)("id")),l.__metadata("design:type",Function),l.__metadata("design:paramtypes",[Number]),l.__metadata("design:returntype","function"==typeof(n="undefined"!=typeof Promise&&Promise)?n:Object)],v.prototype,"getUserById",null),l.__decorate([(0,u.Post)(),l.__param(0,(0,u.Body)()),l.__metadata("design:type",Function),l.__metadata("design:paramtypes",["function"==typeof(i=void 0!==m.UsersEntity&&m.UsersEntity)?i:Object]),l.__metadata("design:returntype","function"==typeof(s="undefined"!=typeof Promise&&Promise)?s:Object)],v.prototype,"createUser",null),l.__decorate([(0,u.Put)(":id"),l.__param(0,(0,u.Param)("id")),l.__param(1,(0,u.Body)()),l.__metadata("design:type",Function),l.__metadata("design:paramtypes",[Number,"function"==typeof(d="undefined"!=typeof Partial&&Partial)?d:Object]),l.__metadata("design:returntype","function"==typeof(p="undefined"!=typeof Promise&&Promise)?p:Object)],v.prototype,"updateUser",null),l.__decorate([(0,u.Delete)(":id"),l.__param(0,(0,u.Param)("id")),l.__metadata("design:type",Function),l.__metadata("design:paramtypes",[Number]),l.__metadata("design:returntype","function"==typeof(c="undefined"!=typeof Promise&&Promise)?c:Object)],v.prototype,"deleteUser",null),t.UsersController=v=l.__decorate([(0,_.ApiTags)("Users"),(0,u.Controller)("users"),l.__metadata("design:paramtypes",["function"==typeof(o=void 0!==y.UsersService&&y.UsersService)?o:Object])],v)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommonModule=void 0;const o=r(6),a=r(1),n=r(29);let i=class CommonModule{};t.CommonModule=i,t.CommonModule=i=o.__decorate([(0,a.Module)({imports:[],controllers:[],providers:[n.EncryptionService],exports:[n.EncryptionService]})],i)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CategoriesModule=void 0;const o=r(6),a=r(1),n=r(39),i=r(9),s=r(41),d=r(40);let p=class CategoriesModule{};t.CategoriesModule=p,t.CategoriesModule=p=o.__decorate([(0,a.Module)({imports:[i.TypeOrmModule.forFeature([s.CategoriesEntity])],controllers:[n.CategoriesController],providers:[d.CategoriesService]})],p)},(e,t,r)=>{var o,a,n,i,s,d,p;Object.defineProperty(t,"__esModule",{value:!0}),t.CategoriesController=void 0;const c=r(6),l=r(1),u=r(40),_=r(3);let y=class CategoriesController{constructor(e){this.categoriesService=e}async getAllCategories(){return await this.categoriesService.getAllCategories()}async getCategoryById(e){return await this.categoriesService.getCategoryById(e)}async createCategory(e){return await this.categoriesService.createCategory(e.category)}async updateCategory(e,t){return await this.categoriesService.updateCategory(e,t)}async deleteCategory(e){await this.categoriesService.deleteCategory(e)}};t.CategoriesController=y,c.__decorate([(0,l.Get)(),c.__metadata("design:type",Function),c.__metadata("design:paramtypes",[]),c.__metadata("design:returntype","function"==typeof(a="undefined"!=typeof Promise&&Promise)?a:Object)],y.prototype,"getAllCategories",null),c.__decorate([(0,l.Get)(":id"),c.__metadata("design:type",Function),c.__metadata("design:paramtypes",[Number]),c.__metadata("design:returntype","function"==typeof(n="undefined"!=typeof Promise&&Promise)?n:Object)],y.prototype,"getCategoryById",null),c.__decorate([(0,l.Post)(),c.__param(0,(0,l.Body)()),c.__metadata("design:type",Function),c.__metadata("design:paramtypes",[Object]),c.__metadata("design:returntype","function"==typeof(i="undefined"!=typeof Promise&&Promise)?i:Object)],y.prototype,"createCategory",null),c.__decorate([(0,l.Put)(":id"),c.__metadata("design:type",Function),c.__metadata("design:paramtypes",[Number,"function"==typeof(s="undefined"!=typeof Partial&&Partial)?s:Object]),c.__metadata("design:returntype","function"==typeof(d="undefined"!=typeof Promise&&Promise)?d:Object)],y.prototype,"updateCategory",null),c.__decorate([(0,l.Delete)(":id"),c.__metadata("design:type",Function),c.__metadata("design:paramtypes",[Number]),c.__metadata("design:returntype","function"==typeof(p="undefined"!=typeof Promise&&Promise)?p:Object)],y.prototype,"deleteCategory",null),t.CategoriesController=y=c.__decorate([(0,_.ApiTags)("Categories"),(0,l.Controller)("categories"),c.__metadata("design:paramtypes",["function"==typeof(o=void 0!==u.CategoriesService&&u.CategoriesService)?o:Object])],y)},(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.CategoriesService=void 0;const a=r(6),n=r(1),i=r(9),s=r(15),d=r(41);let p=class CategoriesService{constructor(e){this.categoriesEntityRepository=e}async getAllCategories(){return await this.categoriesEntityRepository.find()}async getCategoryById(e){return await this.categoriesEntityRepository.findOne({where:{id:e}})}async createCategory(e){return await this.categoriesEntityRepository.save(e)}async updateCategory(e,t){return await this.categoriesEntityRepository.update({id:e},t),await this.categoriesEntityRepository.findOne({where:{id:e}})}async deleteCategory(e){await this.categoriesEntityRepository.delete(e)}};t.CategoriesService=p,t.CategoriesService=p=a.__decorate([(0,n.Injectable)(),a.__param(0,(0,i.InjectRepository)(d.CategoriesEntity)),a.__metadata("design:paramtypes",["function"==typeof(o=void 0!==s.Repository&&s.Repository)?o:Object])],p)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CategoriesEntity=void 0;const o=r(6),a=r(15);let n=class CategoriesEntity{};t.CategoriesEntity=n,o.__decorate([(0,a.PrimaryGeneratedColumn)(),o.__metadata("design:type",Number)],n.prototype,"id",void 0),o.__decorate([(0,a.Column)(),o.__metadata("design:type",String)],n.prototype,"name",void 0),o.__decorate([(0,a.Column)(),o.__metadata("design:type",String)],n.prototype,"color",void 0),t.CategoriesEntity=n=o.__decorate([(0,a.Entity)("category")],n)},(e,t,r)=>{var o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.AuthGuard=void 0;const n=r(6),i=r(1),s=r(2),d=r(13),p=r(34);let c=class AuthGuard{constructor(e,t){this.jwtService=e,this.reflector=t}async canActivate(e){if(this.reflector.getAllAndOverride(p.IS_PUBLIC_KEY,[e.getHandler(),e.getClass()]))return!0;const t=e.switchToHttp().getRequest(),r=this.extractTokenFromHeader(t);if(!r)throw new i.UnauthorizedException;try{const e=await this.jwtService.verifyAsync(r,{secret:p.jwt_secret});t.user=e}catch{throw new i.UnauthorizedException}return!0}extractTokenFromHeader(e){const[t,r]=e.headers.authorization?.split(" ")??[];return"Bearer"===t?r:void 0}};t.AuthGuard=c,t.AuthGuard=c=n.__decorate([(0,i.Injectable)(),n.__metadata("design:paramtypes",["function"==typeof(o=void 0!==d.JwtService&&d.JwtService)?o:Object,"function"==typeof(a=void 0!==s.Reflector&&s.Reflector)?a:Object])],c)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PeopleModule=void 0;const o=r(6),a=r(1),n=r(9),i=r(44),s=r(45),d=r(46);let p=class PeopleModule{};t.PeopleModule=p,t.PeopleModule=p=o.__decorate([(0,a.Module)({imports:[n.TypeOrmModule.forFeature([d.PeopleEntity])],providers:[s.PeopleService],controllers:[i.PeopleController]})],p)},(e,t,r)=>{var o,a,n,i,s,d,p,c;Object.defineProperty(t,"__esModule",{value:!0}),t.PeopleController=void 0;const l=r(6),u=r(1),_=r(3),y=r(45),m=r(46);let v=class PeopleController{constructor(e){this.peopleService=e}async getAllPeople(){return await this.peopleService.getAllPeople()}async getPersonById(e){return await this.peopleService.getPersonById(e)}async createPerson(e){return await this.peopleService.createPerson(e)}async updatePerson(e,t){return await this.peopleService.updatePerson(e,t)}async deletePerson(e){await this.peopleService.deletePerson(e)}};t.PeopleController=v,l.__decorate([(0,u.Get)(),l.__metadata("design:type",Function),l.__metadata("design:paramtypes",[]),l.__metadata("design:returntype","function"==typeof(a="undefined"!=typeof Promise&&Promise)?a:Object)],v.prototype,"getAllPeople",null),l.__decorate([(0,u.Get)(":id"),l.__metadata("design:type",Function),l.__metadata("design:paramtypes",[Number]),l.__metadata("design:returntype","function"==typeof(n="undefined"!=typeof Promise&&Promise)?n:Object)],v.prototype,"getPersonById",null),l.__decorate([(0,u.Post)(),l.__metadata("design:type",Function),l.__metadata("design:paramtypes",["function"==typeof(i=void 0!==m.PeopleEntity&&m.PeopleEntity)?i:Object]),l.__metadata("design:returntype","function"==typeof(s="undefined"!=typeof Promise&&Promise)?s:Object)],v.prototype,"createPerson",null),l.__decorate([(0,u.Put)(":id"),l.__metadata("design:type",Function),l.__metadata("design:paramtypes",[Number,"function"==typeof(d="undefined"!=typeof Partial&&Partial)?d:Object]),l.__metadata("design:returntype","function"==typeof(p="undefined"!=typeof Promise&&Promise)?p:Object)],v.prototype,"updatePerson",null),l.__decorate([(0,u.Delete)(":id"),l.__metadata("design:type",Function),l.__metadata("design:paramtypes",[Number]),l.__metadata("design:returntype","function"==typeof(c="undefined"!=typeof Promise&&Promise)?c:Object)],v.prototype,"deletePerson",null),t.PeopleController=v=l.__decorate([(0,_.ApiTags)("People"),(0,u.Controller)("people"),l.__metadata("design:paramtypes",["function"==typeof(o=void 0!==y.PeopleService&&y.PeopleService)?o:Object])],v)},(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.PeopleService=void 0;const a=r(6),n=r(1),i=r(15),s=r(9),d=r(46);let p=class PeopleService{constructor(e){this.peopleRepository=e}async getAllPeople(){return await this.peopleRepository.find()}async getPersonById(e){return await this.peopleRepository.findOne({where:{id:e}})}async createPerson(e){return await this.peopleRepository.save(e)}async updatePerson(e,t){return await this.peopleRepository.update({id:e},t),this.peopleRepository.findOne({where:{id:e}})}async deletePerson(e){return await this.peopleRepository.delete(e)}};t.PeopleService=p,t.PeopleService=p=a.__decorate([(0,n.Injectable)(),a.__param(0,(0,s.InjectRepository)(d.PeopleEntity)),a.__metadata("design:paramtypes",["function"==typeof(o=void 0!==i.Repository&&i.Repository)?o:Object])],p)},(e,t,r)=>{var o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.PeopleEntity=void 0;const n=r(6),i=r(15);let s=class PeopleEntity{};t.PeopleEntity=s,n.__decorate([(0,i.PrimaryGeneratedColumn)(),n.__metadata("design:type",Number)],s.prototype,"id",void 0),n.__decorate([(0,i.Column)(),n.__metadata("design:type",String)],s.prototype,"first_name",void 0),n.__decorate([(0,i.Column)(),n.__metadata("design:type",String)],s.prototype,"last_name",void 0),n.__decorate([(0,i.Column)(),n.__metadata("design:type","function"==typeof(o="undefined"!=typeof Date&&Date)?o:Object)],s.prototype,"birth_date",void 0),n.__decorate([(0,i.Column)(),n.__metadata("design:type","function"==typeof(a="undefined"!=typeof Date&&Date)?a:Object)],s.prototype,"death_date",void 0),t.PeopleEntity=s=n.__decorate([(0,i.Entity)("people")],s)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GendersModule=void 0;const o=r(6),a=r(1),n=r(48),i=r(49),s=r(9),d=r(28);let p=class GendersModule{};t.GendersModule=p,t.GendersModule=p=o.__decorate([(0,a.Module)({imports:[s.TypeOrmModule.forFeature([d.GendersEntity])],controllers:[n.GendersController],providers:[i.GendersService],exports:[]})],p)},(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.GendersController=void 0;const a=r(6),n=r(1),i=r(49);let s=class GendersController{constructor(e){this.gendersService=e}async findAll(){return await this.gendersService.findAll()}};t.GendersController=s,a.__decorate([(0,n.Get)(),a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",Promise)],s.prototype,"findAll",null),t.GendersController=s=a.__decorate([(0,n.Controller)("genderss"),a.__metadata("design:paramtypes",["function"==typeof(o=void 0!==i.GendersService&&i.GendersService)?o:Object])],s)},(e,t,r)=>{var o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.GendersService=void 0;const n=r(6),i=r(1),s=r(9),d=r(15),p=r(28);let c=class GendersService{constructor(e){this.genderRepository=e}async findAll(){return await this.genderRepository.find()}};t.GendersService=c,n.__decorate([(0,i.Get)("genders"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[]),n.__metadata("design:returntype","function"==typeof(a="undefined"!=typeof Promise&&Promise)?a:Object)],c.prototype,"findAll",null),t.GendersService=c=n.__decorate([(0,i.Injectable)(),n.__param(0,(0,s.InjectRepository)(p.GendersEntity)),n.__metadata("design:paramtypes",["function"==typeof(o=void 0!==d.Repository&&d.Repository)?o:Object])],c)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventsModule=void 0;const o=r(6),a=r(1),n=r(9),i=r(51),s=r(53),d=r(52);let p=class EventsModule{};t.EventsModule=p,t.EventsModule=p=o.__decorate([(0,a.Module)({imports:[n.TypeOrmModule.forFeature([d.EventsEntity])],controllers:[s.EventsController],providers:[i.EventsService]})],p)},(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.EventsService=void 0;const a=r(6),n=r(1),i=r(9),s=r(15),d=r(52);let p=class EventsService{constructor(e){this.eventsRepository=e}async getAllEvents(){return await this.eventsRepository.find({relations:["category","createdBy","updatedBy"]})}async getEventById(e){return await this.eventsRepository.findOne({where:{id:e}})}async createEvent(e){try{return e={...e,startDate:new Date(e.startDate),...e.endDate?{end_date:new Date(e.endDate)}:{}},await this.eventsRepository.save(e),!0}catch(t){return!1}}async updateEvent(e,t){try{return await this.eventsRepository.update({id:e},t),await this.eventsRepository.findOne({where:{id:e}})}catch(r){return}}async deleteEvent(e){await this.eventsRepository.delete(e)}};t.EventsService=p,t.EventsService=p=a.__decorate([(0,n.Injectable)(),a.__param(0,(0,i.InjectRepository)(d.EventsEntity)),a.__metadata("design:paramtypes",["function"==typeof(o=void 0!==s.Repository&&s.Repository)?o:Object])],p)},(e,t,r)=>{var o,a,n,i,s,d,p;Object.defineProperty(t,"__esModule",{value:!0}),t.EventsEntity=void 0;const c=r(6),l=r(15),u=r(16),_=r(41);let y=class EventsEntity{};t.EventsEntity=y,c.__decorate([(0,l.PrimaryGeneratedColumn)(),c.__metadata("design:type",Number)],y.prototype,"id",void 0),c.__decorate([(0,l.Column)({type:"varchar",length:255}),c.__metadata("design:type",String)],y.prototype,"name",void 0),c.__decorate([(0,l.Column)({name:"start_date",type:"datetime"}),c.__metadata("design:type","function"==typeof(o="undefined"!=typeof Date&&Date)?o:Object)],y.prototype,"startDate",void 0),c.__decorate([(0,l.Column)({type:"varchar",length:255,nullable:!0}),c.__metadata("design:type",String)],y.prototype,"notes",void 0),c.__decorate([(0,l.Column)({type:"varchar",length:255,nullable:!0}),c.__metadata("design:type",String)],y.prototype,"source",void 0),c.__decorate([(0,l.Column)({type:"varchar",length:50,nullable:!0}),c.__metadata("design:type",String)],y.prototype,"frequency",void 0),c.__decorate([(0,l.Column)({name:"end_date",type:"datetime",nullable:!0}),c.__metadata("design:type","function"==typeof(a="undefined"!=typeof Date&&Date)?a:Object)],y.prototype,"endDate",void 0),c.__decorate([(0,l.Column)({type:"int",nullable:!0}),c.__metadata("design:type",Number)],y.prototype,"occurrences",void 0),c.__decorate([(0,l.ManyToOne)((()=>_.CategoriesEntity),(e=>e.id)),(0,l.JoinColumn)({name:"category_id"}),c.__metadata("design:type","function"==typeof(n=void 0!==_.CategoriesEntity&&_.CategoriesEntity)?n:Object)],y.prototype,"category",void 0),c.__decorate([(0,l.ManyToOne)((()=>u.UsersEntity),(e=>e.id)),(0,l.JoinColumn)({name:"created_by"}),c.__metadata("design:type","function"==typeof(i=void 0!==u.UsersEntity&&u.UsersEntity)?i:Object)],y.prototype,"createdBy",void 0),c.__decorate([(0,l.ManyToOne)((()=>u.UsersEntity),(e=>e.id)),(0,l.JoinColumn)({name:"updated_by"}),c.__metadata("design:type","function"==typeof(s=void 0!==u.UsersEntity&&u.UsersEntity)?s:Object)],y.prototype,"updatedBy",void 0),c.__decorate([(0,l.Column)({type:"timestamp",default:()=>"CURRENT_TIMESTAMP",onUpdate:"CURRENT_TIMESTAMP",name:"created_at"}),c.__metadata("design:type","function"==typeof(d="undefined"!=typeof Date&&Date)?d:Object)],y.prototype,"createdAt",void 0),c.__decorate([(0,l.Column)({type:"timestamp",default:()=>"CURRENT_TIMESTAMP",onUpdate:"CURRENT_TIMESTAMP",name:"updated_at"}),c.__metadata("design:type","function"==typeof(p="undefined"!=typeof Date&&Date)?p:Object)],y.prototype,"updatedAt",void 0),t.EventsEntity=y=c.__decorate([(0,l.Entity)("events")],y)},(e,t,r)=>{var o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.EventsController=void 0;const n=r(6),i=r(1),s=r(51),d=r(3),p=r(17);let c=class EventsController{constructor(e){this.eventsService=e}async getAllEvents(){return await this.eventsService.getAllEvents()}async getEventById(e){return await this.eventsService.getEventById(e)}async createEvent(e){return await this.eventsService.createEvent(e.event)}async updateEvent(e,t){return await this.eventsService.updateEvent(e.id,t)}async deleteEvent(e){return await this.eventsService.deleteEvent(e)}};t.EventsController=c,n.__decorate([(0,i.Get)(":time"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[]),n.__metadata("design:returntype",Promise)],c.prototype,"getAllEvents",null),n.__decorate([(0,i.Get)(":id"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Number]),n.__metadata("design:returntype",Promise)],c.prototype,"getEventById",null),n.__decorate([(0,i.Post)(),n.__param(0,(0,i.Body)()),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Object]),n.__metadata("design:returntype",Promise)],c.prototype,"createEvent",null),n.__decorate([(0,i.Patch)(),n.__param(0,(0,i.Query)()),n.__param(1,(0,i.Body)()),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Object,"function"==typeof(a=void 0!==p.Events&&p.Events)?a:Object]),n.__metadata("design:returntype",Promise)],c.prototype,"updateEvent",null),n.__decorate([(0,i.Delete)(":id"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Number]),n.__metadata("design:returntype",Promise)],c.prototype,"deleteEvent",null),t.EventsController=c=n.__decorate([(0,d.ApiTags)("Events"),(0,i.Controller)("events"),n.__metadata("design:paramtypes",["function"==typeof(o=void 0!==s.EventsService&&s.EventsService)?o:Object])],c)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VaultModule=void 0;const o=r(6),a=r(1),n=r(55),i=r(56),s=r(37),d=r(9),p=r(57),c=r(58);let l=class VaultModule{};t.VaultModule=l,t.VaultModule=l=o.__decorate([(0,a.Module)({imports:[s.CommonModule,d.TypeOrmModule.forFeature([p.VaultEntity,c.VaultCategoryEntity])],controllers:[n.VaultController],providers:[i.VaultService],exports:[]})],l)},(e,t,r)=>{var o,a,n;Object.defineProperty(t,"__esModule",{value:!0}),t.VaultController=void 0;const i=r(6),s=r(1),d=r(56),p=r(17),c=r(3);let l=class VaultController{constructor(e){this.vaultService=e}async create(e){return await this.vaultService.createVault(e)}async findAll(){return await this.vaultService.getAllVault()}async findAllCategories(){return await this.vaultService.getAllVaultCategories()}async findOne(e){return await this.vaultService.findById(+e)}async update(e,t){return await this.vaultService.updateVault(+e,t)}async remove(e){return await this.vaultService.deleteVault(+e)}};t.VaultController=l,i.__decorate([(0,s.Post)(),i.__param(0,(0,s.Body)()),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",["function"==typeof(a=void 0!==p.Vault&&p.Vault)?a:Object]),i.__metadata("design:returntype",Promise)],l.prototype,"create",null),i.__decorate([(0,s.Get)(),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[]),i.__metadata("design:returntype",Promise)],l.prototype,"findAll",null),i.__decorate([(0,s.Get)("categories"),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[]),i.__metadata("design:returntype",Promise)],l.prototype,"findAllCategories",null),i.__decorate([(0,s.Get)(":id"),i.__param(0,(0,s.Param)("id")),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[String]),i.__metadata("design:returntype",Promise)],l.prototype,"findOne",null),i.__decorate([(0,s.Patch)(":id"),i.__param(0,(0,s.Param)("id")),i.__param(1,(0,s.Body)()),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[String,"function"==typeof(n=void 0!==p.Vault&&p.Vault)?n:Object]),i.__metadata("design:returntype",Promise)],l.prototype,"update",null),i.__decorate([(0,s.Delete)(":id"),i.__param(0,(0,s.Param)("id")),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[String]),i.__metadata("design:returntype",Promise)],l.prototype,"remove",null),t.VaultController=l=i.__decorate([(0,c.ApiTags)("Vault"),(0,s.Controller)("vault"),i.__metadata("design:paramtypes",["function"==typeof(o=void 0!==d.VaultService&&d.VaultService)?o:Object])],l)},(e,t,r)=>{var o,a,n;Object.defineProperty(t,"__esModule",{value:!0}),t.VaultService=void 0;const i=r(6),s=r(1),d=r(9),p=r(57),c=r(15),l=r(29),u=r(58);let _=class VaultService{constructor(e,t,r){this.vaultRepository=e,this.vaultCategoryRepository=t,this.encryptionService=r}async createVault(e){const t={...e,password:await this.encryptionService.encryptString(e.password)};return await this.vaultRepository.save(t)}async getAllVault(){return await this.vaultRepository.find({select:["id","name","username","email","description","uri","created_at","updated_at"],relations:["vaultCategory"],order:{id:"DESC"}})}async getAllVaultCategories(){return await this.vaultCategoryRepository.find()}async findById(e){const t=await this.vaultRepository.findOne({where:{id:e},select:["id","name","username","email","description","password","uri","created_at","updated_at"],relations:["vaultCategory"]});return t?{...t,password:await this.encryptionService.decryptString(t.password)}:null}async updateVault(e,t){const r={...await this.vaultRepository.findOne({where:{id:e},relations:["vaultCategory"]}),...t};return await this.vaultRepository.update({id:e},r),r}async deleteVault(e){return await this.vaultRepository.delete(e),this.vaultRepository.find()}};t.VaultService=_,t.VaultService=_=i.__decorate([(0,s.Injectable)(),i.__param(0,(0,d.InjectRepository)(p.VaultEntity)),i.__param(1,(0,d.InjectRepository)(u.VaultCategoryEntity)),i.__metadata("design:paramtypes",["function"==typeof(o=void 0!==c.Repository&&c.Repository)?o:Object,"function"==typeof(a=void 0!==c.Repository&&c.Repository)?a:Object,"function"==typeof(n=void 0!==l.EncryptionService&&l.EncryptionService)?n:Object])],_)},(e,t,r)=>{var o,a,n;Object.defineProperty(t,"__esModule",{value:!0}),t.VaultEntity=void 0;const i=r(6),s=r(58),d=r(15);let p=class VaultEntity{};t.VaultEntity=p,i.__decorate([(0,d.PrimaryGeneratedColumn)(),i.__metadata("design:type",Number)],p.prototype,"id",void 0),i.__decorate([(0,d.Column)(),i.__metadata("design:type",String)],p.prototype,"name",void 0),i.__decorate([(0,d.Column)(),i.__metadata("design:type",String)],p.prototype,"username",void 0),i.__decorate([(0,d.Column)(),i.__metadata("design:type",String)],p.prototype,"email",void 0),i.__decorate([(0,d.Column)(),i.__metadata("design:type",String)],p.prototype,"password",void 0),i.__decorate([(0,d.Column)(),i.__metadata("design:type",String)],p.prototype,"description",void 0),i.__decorate([(0,d.Column)(),i.__metadata("design:type",String)],p.prototype,"uri",void 0),i.__decorate([(0,d.Column)(),i.__metadata("design:type","function"==typeof(o="undefined"!=typeof Date&&Date)?o:Object)],p.prototype,"created_at",void 0),i.__decorate([(0,d.Column)(),i.__metadata("design:type","function"==typeof(a="undefined"!=typeof Date&&Date)?a:Object)],p.prototype,"updated_at",void 0),i.__decorate([(0,d.ManyToOne)((()=>s.VaultCategoryEntity),(e=>e.id)),(0,d.JoinColumn)({name:"id_vault_category"}),i.__metadata("design:type","function"==typeof(n=void 0!==s.VaultCategoryEntity&&s.VaultCategoryEntity)?n:Object)],p.prototype,"vaultCategory",void 0),t.VaultEntity=p=i.__decorate([(0,d.Entity)("vault")],p)},(e,t,r)=>{var o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.VaultCategoryEntity=void 0;const n=r(6),i=r(15);let s=class VaultCategoryEntity{};t.VaultCategoryEntity=s,n.__decorate([(0,i.PrimaryGeneratedColumn)(),n.__metadata("design:type",Number)],s.prototype,"id",void 0),n.__decorate([(0,i.Column)(),n.__metadata("design:type",String)],s.prototype,"name",void 0),n.__decorate([(0,i.Column)(),n.__metadata("design:type",String)],s.prototype,"description",void 0),n.__decorate([(0,i.Column)(),n.__metadata("design:type",String)],s.prototype,"image",void 0),n.__decorate([(0,i.Column)(),n.__metadata("design:type",String)],s.prototype,"icon",void 0),n.__decorate([(0,i.Column)(),n.__metadata("design:type","function"==typeof(o="undefined"!=typeof Date&&Date)?o:Object)],s.prototype,"created_at",void 0),n.__decorate([(0,i.Column)(),n.__metadata("design:type","function"==typeof(a="undefined"!=typeof Date&&Date)?a:Object)],s.prototype,"updated_at",void 0),t.VaultCategoryEntity=s=n.__decorate([(0,i.Entity)("vault_category")],s)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileUploadModule=void 0;const o=r(6),a=r(1),n=r(60),i=r(61);let s=class FileUploadModule{};t.FileUploadModule=s,t.FileUploadModule=s=o.__decorate([(0,a.Module)({providers:[n.FileUploadService],controllers:[i.FileUploadController]})],s)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileUploadService=void 0;const o=r(6),a=r(1);let n=class FileUploadService{};t.FileUploadService=n,t.FileUploadService=n=o.__decorate([(0,a.Injectable)()],n)},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileUploadController=void 0;const o=r(6),a=r(1);let n=class FileUploadController{};t.FileUploadController=n,t.FileUploadController=n=o.__decorate([(0,a.Controller)("file-upload")],n)}],t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0});const t=r(1),a=r(2),n=r(3),i=r(4),s=r(5),d=r(8);!async function(){const e=await a.NestFactory.create(d.AppModule,{cors:!0});e.setGlobalPrefix("api"),e.useGlobalInterceptors(new s.ResponseInterceptor);const r=process.env.PORT||3e3,o=n.SwaggerModule.createDocument(e,i.swaggerConfig);n.SwaggerModule.setup("swagger",e,o),await e.listen(r),t.Logger.log(`\ud83d\ude80 Application is running on: http://localhost:${r}/api`)}()})();var a=exports;for(var n in o)a[n]=o[n];o.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();