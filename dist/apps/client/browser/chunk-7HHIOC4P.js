import{a as v}from"./chunk-MKWV5R5T.js";import{a as M,b as P,h as K}from"./chunk-IULNXVTX.js";import{a as O}from"./chunk-TKX2KWFY.js";import{Ba as E,Ja as s,Ka as C,Ld as L,N as S,Ta as d,U as y,V as A,Za as m,ad as x,bb as t,bd as k,cb as n,db as u,kb as g,nb as T,od as F,pb as o,pc as f,pd as H,qb as l,rb as I,tb as w,wb as D}from"./chunk-3EK5NAFT.js";var N=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=A({type:e});static \u0275inj=S({imports:[f,O,L,k]})}return e})();function Q(e,a){e&1&&(t(0,"tr")(1,"th"),o(2,"Evento Tipo"),n(),t(3,"th"),o(4,"Total Eventos"),n()())}function B(e,a){if(e&1&&(t(0,"tr")(1,"td",5),u(2,"p-button",6),o(3),n(),t(4,"td"),o(5),n()()),e&2){let c=a.$implicit,i=a.expanded,r=g();s(2),d("pRowToggler",c)("text",!0)("rounded",!0)("plain",!0)("icon",i?"pi pi-chevron-down":"pi pi-chevron-right"),s(),I(" ",c.type," "),s(2),l(r.getEventCount(c.id))}}function $(e,a){e&1&&(t(0,"tr")(1,"th"),o(2,"Evento"),n(),t(3,"th"),o(4,"Fecha"),n(),t(5,"th"),o(6,"Notas"),n(),t(7,"th"),o(8,"Categoria"),n(),t(9,"th"),o(10,"Fuente"),n()())}function U(e,a){if(e&1&&(t(0,"tr")(1,"td"),o(2),n(),t(3,"td"),o(4),n(),t(5,"td"),o(6),n(),t(7,"td"),o(8),n(),t(9,"td")(10,"a",9),u(11,"p-button",10),n()()()),e&2){let c=a.$implicit;s(2),l(c.name),s(2),l(c.event_date.split("T")[0]),s(2),l(c.notes),s(2),l(c.category.name),s(2),T("href",c.source,E),T("title",c.source)}}function q(e,a){if(e&1&&(t(0,"tr")(1,"td",7)(2,"p-table",8),m(3,$,11,0,"ng-template",2)(4,U,12,6,"ng-template",3),n()()()),e&2){let c=a.$implicit,i=g();s(2),d("value",i.filterEvents(c.id))}}var xe=(()=>{let a=class a{constructor(i){this.eventsService=i,this.eventTypes=[{id:1,type:"Hoy"},{id:2,type:"Proximos"},{id:3,type:"Pasados"}]}ngOnInit(){this.getEvents()}getEvents(){this.eventsService.getEvents().subscribe(i=>{this.events=i.result,this.classifyEvents(this.events)})}filterEvents(i){return this.events.filter(r=>r.eventType===i)}getEventCount(i){return this.events?this.events.filter(r=>r.eventType===i).length:0}classifyEvents(i){let r=new Date,p=r.getFullYear()+"-"+(r.getMonth()+1).toString().padStart(2,"0")+"-"+r.getDate().toString().padStart(2,"0"),_=new Date;_.setDate(_.getDate()+7);let R=_.toISOString().split("T")[0];for(let h of i){let b=new Date(h.event_date).toISOString().split("T")[0];b===p?h.eventType=1:b>p&&b<=R?h.eventType=2:h.eventType=3}}};a.\u0275fac=function(r){return new(r||a)(C(v))},a.\u0275cmp=y({type:a,selectors:[["event-trackr-event-summary"]],standalone:!0,features:[w([v]),D],decls:5,vars:2,consts:[[1,"events"],["dataKey","id","scrollHeight","550px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"align-center"],["type","button",3,"pRowToggler","text","rounded","plain","icon"],["colspan","2"],["dataKey","id",3,"value"],["target","_blank",3,"href","title"],["icon","pi pi-external-link","styleClass","p-button-rounded p-button-text"]],template:function(r,p){r&1&&(t(0,"div",0)(1,"p-table",1),m(2,Q,5,0,"ng-template",2)(3,B,6,7,"ng-template",3)(4,q,5,1,"ng-template",4),n()()),r&2&&(s(),d("value",p.eventTypes)("scrollable",!0))},dependencies:[f,N,x,H,F,K,M,P],styles:[".align-center[_ngcontent-%COMP%]{display:flex;align-items:center}"]});let e=a;return e})();export{xe as a};
